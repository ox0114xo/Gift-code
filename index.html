<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>ç¦®åŒ…ç¢¼åŠ©æ‰‹</title>
    
    <link rel="icon" type="image/png" sizes="192x192" href="https://raw.githubusercontent.com/ox0114xo/Gift-code/b9cefb2c764b9b84b111abfddf9df6ec9327a6f5/1771553807683.png">
    <link rel="icon" type="image/png" sizes="512x512" href="https://raw.githubusercontent.com/ox0114xo/Gift-code/b9cefb2c764b9b84b111abfddf9df6ec9327a6f5/1771553807683.png">
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/ox0114xo/Gift-code/b9cefb2c764b9b84b111abfddf9df6ec9327a6f5/1771553807683.png">
    
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/ox0114xo/Gift-code/b9cefb2c764b9b84b111abfddf9df6ec9327a6f5/1771553807683.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://raw.githubusercontent.com/ox0114xo/Gift-code/b9cefb2c764b9b84b111abfddf9df6ec9327a6f5/1771553807683.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/ox0114xo/Gift-code/b9cefb2c764b9b84b111abfddf9df6ec9327a6f5/1771553807683.png">
    <link rel="apple-touch-icon" sizes="167x167" href="https://raw.githubusercontent.com/ox0114xo/Gift-code/b9cefb2c764b9b84b111abfddf9df6ec9327a6f5/1771553807683.png">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ç¦®åŒ…åŠ©æ‰‹">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#f2f4f7">

    <style>
    /* === å…¨å±€é‡ç½® === */
    .gift-root { all: initial; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.5; box-sizing: border-box; width: 100%; display: block; background-color: #f2f4f7 !important; color: #333 !important; }
    .gift-root * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: inherit; }
    .gift-container { max-width: 600px; margin: 0 auto; padding: 15px; background-color: #f2f4f7 !important; min-height: 100vh; }

    /* æ¨™é¡Œèˆ‡å„€è¡¨æ¿ */
    .gift-header { text-align: center; margin-bottom: 20px; padding-top: 10px; }
    .gift-title { margin: 0; font-size: 1.8rem !important; color: #2c3e50 !important; font-weight: 900 !important; }
    .gift-subtitle { color: #7f8c8d !important; font-size: 0.9rem !important; margin-top: 5px; display: block; font-weight: bold; }
    .g-dashboard { display: flex; gap: 10px; background: #fff !important; padding: 15px; border-radius: 16px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #fff; }
    .g-item { flex: 1; text-align: center; }
    .g-label { font-size: 0.85rem !important; color: #95a5a6 !important; display: block; margin-bottom: 5px; font-weight: bold; }
    .g-val { font-size: 1.5rem !important; font-weight: 900 !important; color: #2c3e50 !important; line-height: 1; }
    .g-val.red { color: #e74c3c !important; }

    /* æ“ä½œæŒ‰éˆ• */
    .g-controls { display: flex; gap: 8px; margin-bottom: 15px; position: sticky; top: 10px; z-index: 100; background: rgba(242, 244, 247, 0.95); padding: 5px 0; backdrop-filter: blur(5px); }
    .g-btn { flex: 1; padding: 12px 0; border: none; border-radius: 50px; background: #fff !important; color: #555 !important; font-weight: bold !important; font-size: 0.95rem !important; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.08); transition: transform 0.1s; display: flex; align-items: center; justify-content: center; gap: 4px; }
    .g-btn.active { background: #2c3e50 !important; color: #fff !important; box-shadow: 0 4px 12px rgba(44, 62, 80, 0.3); }
    .g-btn:active { transform: scale(0.96); }

    /* è¤‡è£½æ¸…å–®æŒ‰éˆ• */
    .copy-all-btn { width: 100%; padding: 14px; background: linear-gradient(135deg, #e67e22, #f39c12) !important; color: #fff !important; border: none; border-radius: 12px; font-weight: bold !important; font-size: 1rem !important; margin-bottom: 20px; cursor: pointer; display: block; box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3); text-align: center; }
    .copy-all-btn:active { transform: scale(0.98); }

    .loading-msg { text-align: center; color: #e67e22; font-weight: bold; padding: 20px; font-size: 1.1rem; }

    /* åˆ—è¡¨æ¨£å¼ */
    .g-list { display: flex; flex-direction: column; gap: 14px; padding-bottom: 20px; }
    .g-card { background: #fff !important; padding: 18px; border-radius: 16px; position: relative; border: 1px solid #f0f0f0; box-shadow: 0 2px 10px rgba(0,0,0,0.03); transition: all 0.2s; }
    .g-card.redeemed { opacity: 0.6; background: #f8f9fa !important; border-color: #e0e0e0; }
    .g-card.pending { background: #fffcf2 !important; border-color: #ffecb3; }
    .g-card.reported { opacity: 0.7; background: #fff5f5 !important; border-color: #ffc9c9; }
    .tag { position: absolute; top: 0; right: 0; padding: 4px 10px; font-size: 0.75rem !important; border-bottom-left-radius: 12px; border-top-right-radius: 16px; font-weight: bold; }
    .tag.pending { background: #ffeeba !important; color: #b7791f !important; }
    .tag.reported { background: #ffcccc !important; color: #c0392b !important; }
    .g-top { display: flex; justify-content: space-between; margin-bottom: 12px; align-items: center; }
    .g-points { color: #e74c3c !important; font-weight: 800 !important; font-size: 1.3rem !important; letter-spacing: -0.5px; }
    .g-date { background: #eee !important; padding: 3px 8px; border-radius: 6px; font-size: 0.8rem !important; margin-left: 8px; color: #555 !important; font-weight: bold; }
    .g-note { color: #888 !important; font-size: 0.9rem !important; max-width: 60%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: right; }

    .g-code { background: #ebf5ff !important; color: #007bff !important; border: 2px dashed #a6cfff !important; padding: 14px; text-align: center; border-radius: 10px; font-family: "Courier New", monospace !important; font-size: 1.4rem !important; font-weight: bold !important; cursor: pointer; margin-bottom: 12px; user-select: all; letter-spacing: 1px; }
    .g-code:active { background: #d6eaff !important; transform: scale(0.98); }
    .g-actions { display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #f5f5f5; padding-top: 12px; }
    .g-act-btn { font-size: 0.85rem !important; color: #999 !important; cursor: pointer; padding: 6px 10px; border-radius: 8px; background: #f9f9f9; display: flex; align-items: center; gap: 4px; }
    .g-act-btn.pending { color: #d35400 !important; background: #fff8e1 !important; }
    .g-check { display: flex; align-items: center; gap: 8px; font-size: 0.95rem !important; color: #555 !important; cursor: pointer; padding: 5px; font-weight: 500; }
    .g-check input { width: 22px; height: 22px; accent-color: #27ae60; cursor: pointer; }

    /* æç¤ºæ¡†èˆ‡åˆ†éš”ç·š */
    #g-toast { visibility: hidden; position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%); background: rgba(30, 30, 30, 0.9); color: #fff; padding: 12px 24px; border-radius: 50px; font-size: 1rem; z-index: 9999; box-shadow: 0 5px 20px rgba(0,0,0,0.2); white-space: nowrap; opacity: 0; transition: opacity 0.3s; }
    #g-toast.show { visibility: visible; opacity: 1; bottom: 60px; }
    .g-divider { display: block; width: 100%; padding: 16px; margin-top: 25px; margin-bottom: 15px; background: #e0e0e0 !important; color: #555 !important; border: none; border-radius: 12px; font-weight: bold !important; font-size: 1rem !important; cursor: pointer; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .g-divider:active { background: #d0d0d0 !important; transform: scale(0.98); }
    .g-sec-title { font-size: 1rem !important; font-weight: bold !important; color: #555 !important; margin: 20px 0 10px 0; padding-left: 5px; border-left: 4px solid #e74c3c; line-height: 1.2; padding-left: 10px; }
    #old-list { display: none; margin-top: 10px; flex-direction: column; gap: 14px; }

    /* å½ˆçª— */
    .modal-mask { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 10000; align-items: center; justify-content: center; backdrop-filter: blur(2px); }
    .modal-mask.open { display: flex; }
    .modal-body { background: #fff; padding: 25px; border-radius: 20px; width: 85%; max-width: 320px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.25); }
    .modal-body h3 { margin: 0 0 15px; color: #333; font-size: 1.2rem; }
    .modal-desc { margin-bottom: 20px; color: #555; font-size: 0.95rem; line-height: 1.6; text-align: left; background: #f8f9fa; padding: 15px; border-radius: 12px; }
    .m-btn { display: block; width: 100%; padding: 14px; margin-bottom: 12px; border-radius: 12px; border: 1px solid #eee; font-size: 1rem; font-weight: bold; cursor: pointer; background: #fff; color: #555; }
    .m-btn.red { background: #fff5f5 !important; color: #e74c3c !important; border-color: #ffcccc; }
    .m-btn.blue { background: #ebf5ff !important; color: #007bff !important; border-color: #a6cfff; }
    </style>
</head>
<body>

<div class="gift-root">
    <div class="gift-container">
        
        <div class="gift-header">
            <h2 class="gift-title">ç¦®åŒ…ç¢¼åŠ©æ‰‹</h2>
            <span class="gift-subtitle">ä¸€éµè¤‡è£½ &bull; è‡ªå‹•åŒæ­¥é›²ç«¯åº«</span>
        </div>

        <div class="g-dashboard">
            <div class="g-item">
                <span class="g-label">ç¦®åŒ…ç¸½æ•¸</span>
                <div class="g-val" id="d-count">0</div>
            </div>
            <div class="g-item">
                <span class="g-label">ç¸½ç¦åˆ©</span>
                <div class="g-val red" id="d-points">0</div>
            </div>
        </div>

        <div class="g-controls">
            <button class="g-btn active" id="btn-date" onclick="window.GiftApp.sort('date')">ğŸ“… æ—¥æœŸ</button>
            <button class="g-btn" id="btn-points" onclick="window.GiftApp.sort('points')">ğŸ’° é»æ•¸</button>
            <button class="g-btn" id="btn-filter" onclick="window.GiftApp.toggleFilter()">ğŸ“‹ æœªé ˜</button>
        </div>

        <button class="copy-all-btn" onclick="window.GiftApp.copyList()">ğŸ’° è¤‡è£½ç¤¾åœ˜æ¨å»£æ–‡æ¡ˆ</button>

        <div id="loading-msg" class="loading-msg">ğŸ”„ æ­£åœ¨é€£ç·šè®€å–æœ€æ–°ç¦®åŒ…...</div>

        <div class="g-sec-title">ğŸ”¥ æœ€æ–°ç¦®åŒ…å€</div>
        <div id="new-list" class="g-list"></div>

        <button id="toggle-btn" class="g-divider" onclick="window.GiftApp.toggleOld()">ğŸ“‚ æŸ¥çœ‹æ­·å²åº«å­˜ â–¼</button>
        <div id="old-list"></div>
        
        <div style="text-align:center; margin-top:40px; padding-bottom:40px;">
            <span style="font-size:0.9rem; color:#ccc; cursor:pointer; text-decoration:underline;" onclick="window.GiftApp.reset()">é‡ç½®æ‰€æœ‰ç´€éŒ„</span>
        </div>
    </div>
</div>

<div id="g-toast"></div>

<div id="modal" class="modal-mask">
    <div class="modal-body">
        <h3>å›å ±å•é¡Œ</h3>
        <button class="m-btn red" onclick="window.GiftApp.confirmReport('expired')">ğŸ“… å·²ç¶“éæœŸ</button>
        <button class="m-btn red" onclick="window.GiftApp.confirmReport('empty')">ğŸ˜« å·²ç¶“è¢«é ˜å®Œ</button>
        <button class="m-btn" onclick="window.GiftApp.closeModal()">å–æ¶ˆ</button>
    </div>
</div>

<div id="install-modal" class="modal-mask">
    <div class="modal-body">
        <h3 id="install-title">ğŸš€ åŠ åˆ°ä¸»ç•«é¢</h3>
        <div id="install-desc" class="modal-desc"></div>
        <button class="m-btn blue" onclick="window.GiftApp.closeInstall()">æˆ‘å·²ç¶“åŠ å¥½äº†</button>
    </div>
</div>

<script>
// ==========================================
// âš™ï¸ ç³»çµ±è¨­å®šå€
// ==========================================

var SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSkENoeJW2fV8JucN514cMysAStsgNLzjbYKrE04bDSAJOKTayexd-Ve3Fce4KB6FQsXvtMTgPZ7Mnw/pub?output=csv"; 

var CUTOFF_DATE = 213; 
var PROMO_SLOGAN = "è²¡æºå»£é€² åˆå››è´éº»äº†"; 

// ==========================================

window.GiftApp = (function() {
    var raw = [];
    var st = { r:[], p:[], b:{}, sort:'date', dir:1, filter:false, target:null };

    function detectOS() {
        var ua = navigator.userAgent || navigator.vendor || window.opera;
        if (/android/i.test(ua)) return 'Android';
        if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) return 'iOS';
        return 'Other';
    }

    function autoShowInstall() {
        var isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;
        var hasSeen = localStorage.getItem('hideInstallAlert_v2'); // æ›´æ–°ç·©å­˜åç¨±ç¢ºä¿æœƒè·³å‡º
        
        if (!isStandalone && !hasSeen) {
            setTimeout(function() {
                var os = detectOS();
                var desc = document.getElementById('install-desc');
                if (os === 'iOS') {
                    desc.innerHTML = "æŠŠåŠ©æ‰‹è®Š APP è¶…æ–¹ä¾¿ï¼<br><br>1. é»æ“Šåº•ä¸‹å°è¦½åˆ—çš„ã€Œ<b>åˆ†äº« <span style='font-size:1.2rem'>â—</span></b>ã€<br>2. é¸æ“‡ã€Œ<b>åŠ åˆ°ä¸»ç•«é¢ <span style='font-size:1.2rem'>âŠ</span></b>ã€";
                } else if (os === 'Android') {
                    desc.innerHTML = "æŠŠåŠ©æ‰‹è®Š APP è¶…æ–¹ä¾¿ï¼<br><br>1. é»æ“Šå³ä¸Šè§’ã€Œ<b>ä¸‰å€‹é» <span style='font-size:1.2rem'>â‹®</span></b>ã€<br>2. é¸æ“‡ã€Œ<b>åŠ åˆ°ä¸»ç•«é¢</b>ã€";
                } else {
                    return; // é›»è…¦ç‰ˆä¸è·³é€šçŸ¥
                }
                document.getElementById('install-modal').className = 'modal-mask open';
            }, 1000); // ç¶²é è¼‰å…¥å¾Œ 1 ç§’è·³å‡º
        }
    }

    function init() {
        var s = localStorage.getItem('gift_data_v4');
        if(s) { try { st = JSON.parse(s); } catch(e){} }
        if(!Array.isArray(st.r)) st.r=[]; if(!Array.isArray(st.p)) st.p=[]; if(typeof st.b!=='object') st.b={};
        
        autoShowInstall(); // å‘¼å«è‡ªå‹•é€šçŸ¥åŠŸèƒ½
        
        // æŠ“å– Google è©¦ç®—è¡¨è³‡æ–™
        fetch(SHEET_CSV_URL)
            .then(function(response) {
                if(!response.ok) throw new Error("ç¶²è·¯é€£ç·šéŒ¯èª¤");
                return response.text();
            })
            .then(function(csvText) {
                document.getElementById('loading-msg').style.display = 'none';
                raw = parseCSV(csvText);
                if(raw.length === 0) {
                    document.getElementById('loading-msg').style.display = 'block';
                    document.getElementById('loading-msg').innerHTML = "âš ï¸ è®€ä¸åˆ°è³‡æ–™ï¼<br><span style='font-size:0.9rem; color:#888;'>è«‹ç¢ºèª Google è©¦ç®—è¡¨å·²é–‹å•Ÿã€Œç™¼å¸ƒåˆ°ç¶²è·¯(CSV)ã€è¨­å®š</span>";
                }
                render();
            })
            .catch(function(err) {
                document.getElementById('loading-msg').innerHTML = 'âš ï¸ è®€å–å¤±æ•—ï¼Œè«‹ç¢ºèªç¶²å€æ­£ç¢ºæˆ–é‡æ–°æ•´ç†ã€‚';
                console.error(err);
            });
    }

    function parseCSV(text) {
        var arr = [];
        var lines = text.split(/\r?\n/);
        for(var i=1; i<lines.length; i++) {
            if(!lines[i].trim()) continue;
            var cols = lines[i].split(',');
            if(cols.length >= 3) {
                var d = cols[0].trim();
                var p = parseInt(cols[1].trim()) || 0;
                var c = cols[2].trim();
                var n = cols[3] ? cols[3].trim() : "";
                if(c !== "") arr.push({d: d, p: p, c: c, n: n});
            }
        }
        return arr;
    }

    function save() { localStorage.setItem('gift_data_v4', JSON.stringify(st)); render(); }

    function render() {
        var nL = document.getElementById('new-list'), oL = document.getElementById('old-list');
        if(!nL || !oL) return;
        
        var total = 0; raw.forEach(function(i){ total += i.p; });
        document.getElementById('d-count').innerText = raw.length;
        document.getElementById('d-points').innerText = total.toLocaleString();
        
        var list = raw.slice();
        if(st.filter) list = list.filter(function(i){ return st.r.indexOf(i.c) < 0 && !st.b[i.c]; });
        
        list.sort(function(a, b){
            if(st.sort === 'date') { var da = parseD(a.d), db = parseD(b.d); return st.dir === 1 ? db - da : da - db; }
            else { return st.dir === 1 ? b.p - a.p : a.p - b.p; }
        });
        
        var nH = '', oH = ''; var hasN=false, hasO=false;
        list.forEach(function(i) {
            var isR = st.r.indexOf(i.c) >= 0, isP = st.p.indexOf(i.c) >= 0, isB = !!st.b[i.c];
            var cls = 'g-card'; var tag = '';
            if(isB) { cls+=' reported'; tag='<div class="tag reported">âš ï¸ å¤±æ•ˆ</div>'; }
            else if(isR) { cls+=' redeemed'; }
            else if(isP) { cls+=' pending'; tag='<div class="tag pending">â³ æš«å­˜</div>'; }
            var html = '<div class="'+cls+'">'+tag+'<div class="g-top"><div><span class="g-points">ğŸ’°'+i.p+'</span><span class="g-date">'+i.d+'</span></div><div class="g-note">'+i.n+'</div></div><div class="g-code" onclick="window.GiftApp.copy(\''+i.c+'\')">'+i.c+'</div><div class="g-actions"><div style="display:flex;gap:8px;"><div class="g-act-btn" onclick="window.GiftApp.openModal(\''+i.c+'\')">âš ï¸ å›å ±</div><div class="g-act-btn '+(isP?'pending':'')+'" onclick="window.GiftApp.togP(\''+i.c+'\')">â³ è³‡æ ¼æœªç¬¦</div></div><label class="g-check"><input type="checkbox" onchange="window.GiftApp.togR(\''+i.c+'\',this.checked)" '+(isR?'checked':'')+'> å·²é ˜</label></div></div>';
            
            if(parseD(i.d) >= CUTOFF_DATE) { nH += html; hasN = true; } else { oH += html; hasO = true; }
        });
        nL.innerHTML = hasN ? nH : '<div style="text-align:center;padding:20px;color:#999;">ğŸ‰ æš«ç„¡æ–°ç¦®åŒ…</div>';
        oL.innerHTML = hasO ? oH : '<div style="text-align:center;padding:20px;color:#999;">ğŸ“­ æš«ç„¡åº«å­˜</div>';
        updBtn();
    }

    function parseD(d) { var p = d.split('/'); return (parseInt(p[0]) * 100) + parseInt(p[1]); }
    function updBtn() {
        var arr = st.dir === 1 ? 'â†“' : 'â†‘';
        document.getElementById('btn-date').innerText = 'ğŸ“… æ—¥æœŸ ' + (st.sort==='date'?arr:'');
        document.getElementById('btn-date').className = st.sort==='date'?'g-btn active':'g-btn';
        document.getElementById('btn-points').innerText = 'ğŸ’° é»æ•¸ ' + (st.sort==='points'?arr:'');
        document.getElementById('btn-points').className = st.sort==='points'?'g-btn active':'g-btn';
        document.getElementById('btn-filter').className = st.filter?'g-btn active':'g-btn';
    }
    function toast(m) { var t = document.getElementById('g-toast'); t.innerText = m; t.className = 'show'; setTimeout(function(){ t.className = ''; }, 2000); }
    function copyToClip(txt) { var el = document.createElement('textarea'); el.value = txt; document.body.appendChild(el); el.select(); document.execCommand('copy'); document.body.removeChild(el); }

    return {
        init: init,
        reset: function() { if(confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰ç´€éŒ„å—ï¼Ÿ')) { localStorage.removeItem('gift_data_v4'); localStorage.removeItem('hideInstallAlert_v2'); location.reload(); } },
        sort: function(t) { if(st.sort===t) st.dir*=-1; else { st.sort=t; st.dir=1; } render(); },
        toggleFilter: function() { st.filter=!st.filter; render(); },
        toggleOld: function() {
            var el = document.getElementById('old-list');
            var btn = document.getElementById('toggle-btn');
            if(el.style.display === 'flex') { el.style.display = 'none'; btn.innerText = 'ğŸ“‚ æŸ¥çœ‹æ­·å²åº«å­˜ â–¼'; } 
            else { el.style.display = 'flex'; btn.innerText = 'ğŸ“‚ æ”¶èµ·æ­·å²åº«å­˜ â–²'; }
        },
        togR: function(c, v) {
            if(v) { if(st.r.indexOf(c)<0) st.r.push(c); var i=st.p.indexOf(c); if(i>=0) st.p.splice(i,1); } else { var i=st.r.indexOf(c); if(i>=0) st.r.splice(i,1); } save();
        },
        togP: function(c) { var i = st.p.indexOf(c); if(i>=0) st.p.splice(i,1); else st.p.push(c); save(); },
        copy: function(c) { if(st.b[c]) { toast('âš ï¸ è©²åºè™Ÿå·²å›å ±å¤±æ•ˆ'); return; } copyToClip(c); toast('âœ… å·²è¤‡è£½ä¸¦æ¨™è¨˜é ˜å–'); this.togR(c, true); },
        copyList: function() {
            var txt = "ğŸ”¥ğŸ”¥ã€ç¦®åŒ…ç¢¼æ•´ç†ç¥å™¨ã€‘ğŸ”¥ğŸ”¥\nå„ä½è€é—†ä¹…ç­‰äº†ï¼ç¦åˆ©åºè™Ÿéƒ½åœ¨é€™è£¡ï½\nä¸ç”¨å†æ‰‹å‹•è¼¸å…¥åˆ°æ‰‹ç—  ğŸ˜«\n\né»æ“Šä¸‹æ–¹é€£çµ ğŸ‘‡\nè£¡é¢æœ‰æœ€æ–°çš„ã€Œä¸€éµè¤‡è£½ã€åŠŸèƒ½ âœ…\nè‡ªå‹•å¹«ä½ æ•´ç†å¥½æ‰€æœ‰åºè™Ÿï¼Œè¶…ç´šæ–¹ä¾¿ï¼\nè¶•å¿«é»é€²å»é ˜å–å§ ğŸ\n\nå‚³é€é–€åœ¨æ­¤ â–¶ï¸ ppt.cc/fDXaPx\n\n(é ˜å–å¾Œè¨˜å¾—å›è¦†ï¼š" + PROMO_SLOGAN + ")";
            copyToClip(txt); toast('ğŸ’° ç¤¾åœ˜æ–‡æ¡ˆå·²è¤‡è£½');
        },
        openModal: function(c) { st.target = c; document.getElementById('modal').className = 'modal-mask open'; },
        closeModal: function() { document.getElementById('modal').className = 'modal-mask'; st.target = null; },
        confirmReport: function(type) {
            if(!st.target) return; st.b[st.target] = type; save();
            var reason = type==='expired' ? 'éæœŸ' : 'é ˜å®Œ';
            copyToClip('å›å ±ï¼šåºè™Ÿ ' + st.target + ' å·²' + reason);
            this.closeModal(); toast('âœ… å·²æ¨™è¨˜å¤±æ•ˆ');
        },
        closeInstall: function() {
            document.getElementById('install-modal').className = 'modal-mask';
            // è¨˜éŒ„ç”¨æˆ¶å·²çœ‹éï¼Œä»¥å¾Œå°±ä¸å†è·³å‡ºé€šçŸ¥
            localStorage.setItem('hideInstallAlert_v2', 'true'); 
        }
    };
})();
if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', window.GiftApp.init); } else { window.GiftApp.init(); }
</script>
</body>
</html>
